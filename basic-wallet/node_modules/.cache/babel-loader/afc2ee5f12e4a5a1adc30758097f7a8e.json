{"ast":null,"code":"import _regeneratorRuntime from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  flex: 1;\\n  color: #b91919;\\n  font-size: 18px;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport { useBurner } from '@burner-wallet/ui-core';\nimport styled from 'styled-components';\nimport Address from '../../components/Address';\nimport Button from '../../components/Button';\nimport Page from '../../components/Page';\nimport LineItem from '../../components/LineItem';\nvar Toolbar = styled.div(_templateObject());\nvar ErrorMessage = styled.div(_templateObject2());\n\nvar ConfirmPage = function ConfirmPage(_ref) {\n  var history = _ref.history;\n\n  var _useBurner = useBurner(),\n      BurnerComponents = _useBurner.BurnerComponents,\n      assets = _useBurner.assets,\n      actions = _useBurner.actions,\n      pluginData = _useBurner.pluginData,\n      t = _useBurner.t;\n\n  var PluginElements = BurnerComponents.PluginElements;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      sending = _useState4[0],\n      _setSending = _useState4[1];\n\n  var setSending = function setSending(isSending) {\n    _setSending(isSending);\n\n    actions.setLoading(isSending ? 'Sending...' : null);\n  };\n\n  if (!history.location.state) {\n    history.replace('/send');\n    return null;\n  }\n\n  var _history$location$sta = history.location.state,\n      to = _history$location$sta.to,\n      from = _history$location$sta.from,\n      ether = _history$location$sta.ether,\n      value = _history$location$sta.value,\n      assetId = _history$location$sta.asset,\n      message = _history$location$sta.message,\n      id = _history$location$sta.id;\n\n  var _assets$filter = assets.filter(function (a) {\n    return a.id === assetId;\n  }),\n      _assets$filter2 = _slicedToArray(_assets$filter, 1),\n      asset = _assets$filter2[0];\n\n  var amount = ether || asset.getDisplayValue(value);\n\n  var send =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var receipt, redirect;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setSending(true);\n              setError(null);\n              _context.prev = 2;\n              actions.setLoading('Sending...');\n              _context.next = 6;\n              return asset.send({\n                from: from,\n                to: to,\n                ether: ether,\n                value: value,\n                message: message\n              });\n\n            case 6:\n              receipt = _context.sent;\n              actions.setLoading(null);\n              redirect = pluginData.sent({\n                asset: assetId,\n                from: from,\n                to: to,\n                ether: amount,\n                message: message,\n                receipt: receipt,\n                hash: receipt.transactionHash,\n                id: id\n              });\n              history.push(redirect || \"/receipt/\".concat(asset.id, \"/\").concat(receipt.transactionHash));\n              _context.next = 17;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](2);\n              setError(\"Error: \".concat(_context.t0.message));\n              setSending(false);\n              console.error(_context.t0);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 12]]);\n    }));\n\n    return function send() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(Page, {\n    title: t('Confirm')\n  }, React.createElement(PluginElements, {\n    position: \"confirm-top\",\n    tx: history.location.state\n  }), React.createElement(LineItem, {\n    name: t('From')\n  }, React.createElement(Address, {\n    address: from\n  })), React.createElement(LineItem, {\n    name: t('To')\n  }, React.createElement(Address, {\n    address: to\n  })), React.createElement(LineItem, {\n    name: t('Amount'),\n    value: \"\".concat(amount, \" \").concat(asset.name)\n  }), message && React.createElement(LineItem, {\n    name: t('Note'),\n    value: message\n  }), React.createElement(PluginElements, {\n    position: \"confirm-middle\",\n    tx: history.location.state\n  }), React.createElement(Toolbar, null, React.createElement(ErrorMessage, null, error), React.createElement(Button, {\n    disabled: sending,\n    onClick: function onClick() {\n      return history.goBack();\n    }\n  }, t('Cancel')), React.createElement(Button, {\n    disabled: sending,\n    onClick: send\n  }, t('Send'))), React.createElement(PluginElements, {\n    position: \"confirm-bottom\",\n    tx: history.location.state\n  }));\n};\n\nexport default ConfirmPage;","map":null,"metadata":{},"sourceType":"module"}