{"ast":null,"code":"import _regeneratorRuntime from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport namehash from 'eth-ens-namehash';\nimport { registryInterface, resolverInterface } from './abi';\nvar ZERO = '0x0000000000000000000000000000000000000000';\nvar registrarAddress = {\n  '1': '0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e',\n  '3': '0x112234455c3a32fd11230c42e7bccd4a84e02010',\n  '4': '0xe7410170f87102df0055eb195163a03b7f2bff4a',\n  '5': '0x112234455c3a32fd11230c42e7bccd4a84e02010'\n};\n\nvar ENS =\n/*#__PURE__*/\nfunction () {\n  function ENS(web3) {\n    var network = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '1';\n\n    _classCallCheck(this, ENS);\n\n    this.web3 = web3;\n    this.network = network;\n  }\n\n  _createClass(ENS, [{\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      if (!registrarAddress[this.network]) {\n        throw new Error(\"ENS not supported on network \".concat(this.network));\n      }\n\n      return new this.web3.eth.Contract(registryInterface, registrarAddress[this.network]);\n    }\n  }, {\n    key: \"getResolver\",\n    value: function getResolver(address) {\n      return new this.web3.eth.Contract(resolverInterface, address);\n    }\n  }, {\n    key: \"getAddress\",\n    value: function () {\n      var _getAddress = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(ensName) {\n        var hashed, resolverAddr, address;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                hashed = namehash.hash(ensName);\n                _context.next = 3;\n                return this.getRegistry().methods.resolver(hashed).call();\n\n              case 3:\n                resolverAddr = _context.sent;\n\n                if (!(resolverAddr === ZERO)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", null);\n\n              case 6:\n                _context.next = 8;\n                return this.getResolver(resolverAddr).methods.addr(hashed).call();\n\n              case 8:\n                address = _context.sent;\n                return _context.abrupt(\"return\", address === ZERO ? null : address);\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getAddress(_x) {\n        return _getAddress.apply(this, arguments);\n      }\n\n      return getAddress;\n    }()\n  }, {\n    key: \"reverseLookup\",\n    value: function () {\n      var _reverseLookup = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(address) {\n        var _address, hashed, resolverAddr, name;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _address = (address.indexOf('0x') === 0 ? address.substr(2) : address).toLowerCase();\n                hashed = namehash.hash(\"\".concat(_address, \".addr.reverse\"));\n                _context2.next = 4;\n                return this.getRegistry().methods.resolver(hashed).call();\n\n              case 4:\n                resolverAddr = _context2.sent;\n\n                if (!(resolverAddr === ZERO)) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", null);\n\n              case 7:\n                _context2.next = 9;\n                return this.getResolver(resolverAddr).methods.name(hashed).call();\n\n              case 9:\n                name = _context2.sent;\n                return _context2.abrupt(\"return\", name);\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function reverseLookup(_x2) {\n        return _reverseLookup.apply(this, arguments);\n      }\n\n      return reverseLookup;\n    }()\n  }]);\n\n  return ENS;\n}();\n\nexport { ENS as default };","map":null,"metadata":{},"sourceType":"module"}