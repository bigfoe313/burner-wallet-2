{"ast":null,"code":"var _classCallCheck = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar axios = require('axios');\n\nvar logreq = process.env.httpsendlog;\nvar logmaxlen = 120;\n\nvar HttpWrapper =\n/*#__PURE__*/\nfunction () {\n  \"use strict\";\n\n  function HttpWrapper(opts) {\n    _classCallCheck(this, HttpWrapper);\n\n    this.provider = axios.create(Object.assign({\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }, opts));\n\n    if (logreq) {\n      this.provider.interceptors.response.use(function (response) {\n        console.log(\"got response:\", response.config.url, JSON.stringify(response.data).slice(0, logmaxlen));\n        return response;\n      }, function (error) {\n        var errData = error.response ? error.response.data : {\n          error: error.message\n        };\n        var errStr = (typeof errData === 'string' ? errData : JSON.stringify(errData)).slice(0, logmaxlen);\n        var errUrl = error.response ? error.response.config.url : error.address;\n        console.log(\"got response:\", errUrl, \"err=\", errStr);\n        return Promise.reject(error);\n      });\n    }\n  }\n\n  _createClass(HttpWrapper, [{\n    key: \"send\",\n    value: function send(url, jsonRequestData, callback) {\n      this.sendPromise(url, jsonRequestData || {}).then(function (data) {\n        return callback(null, data);\n      }).catch(function (err) {\n        return callback(err, null);\n      });\n    }\n  }, {\n    key: \"sendPromise\",\n    value: function sendPromise(url, jsonRequestData) {\n      if (logreq) {\n        console.log(\"sending request:\", url, JSON.stringify(jsonRequestData || {}).slice(0, logmaxlen));\n      }\n\n      return this.provider.post(url, jsonRequestData).then(function (res) {\n        return res.data;\n      }).catch(function (err) {\n        return Promise.reject(err.response ? err.response.data : {\n          error: err.message\n        });\n      });\n    }\n  }]);\n\n  return HttpWrapper;\n}();\n\nmodule.exports = HttpWrapper;","map":null,"metadata":{},"sourceType":"script"}