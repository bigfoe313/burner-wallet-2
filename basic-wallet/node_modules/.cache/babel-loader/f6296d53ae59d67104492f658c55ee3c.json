{"ast":null,"code":"const flatMap = require('lodash.flatmap');\n\nconst BaseFilter = require('./base-filter');\n\nconst getBlocksForRange = require('./getBlocksForRange');\n\nconst _require = require('./hexUtils'),\n      incrementHexInt = _require.incrementHexInt;\n\nclass TxFilter extends BaseFilter {\n  constructor({\n    provider,\n    params\n  }) {\n    super();\n    this.type = 'tx';\n    this.provider = provider;\n  }\n\n  async update({\n    oldBlock,\n    newBlock\n  }) {\n    const toBlock = oldBlock;\n    const fromBlock = incrementHexInt(oldBlock);\n    const blocks = await getBlocksForRange({\n      provider: this.provider,\n      fromBlock,\n      toBlock\n    });\n    const blockTxHashes = flatMap(blocks, block => block.transactions); // add to results\n\n    this.addResults(blockTxHashes);\n  }\n\n}\n\nmodule.exports = TxFilter;","map":null,"metadata":{},"sourceType":"script"}