{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject5() {\n  const data = _taggedTemplateLiteral([\"\\n  min-width: 60px;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n\"]);\n\n  _templateObject5 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  const data = _taggedTemplateLiteral([\"\\n  font-size: 16px;\\n\"]);\n\n  _templateObject4 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  const data = _taggedTemplateLiteral([\"\\n  font-size: 48px;\\n  display: flex;\\n  justify-content: flex-end;\\n\\n  & .digit {\\n    width: 30px;\\n    text-align: center;\\n  }\\n\"]);\n\n  _templateObject3 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  const data = _taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  text-align: right;\\n\"]);\n\n  _templateObject2 = function () {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  vertical-align: middle;\\n  font-size: 48px;\\n  font-weight: 400;\\n  text-align: right;\\n  padding: 8px 16px 8px 8px;\\n  border: 1px solid #ccc;\\n  border-radius: 8px;\\n  min-width: 225px;\\n  background: white;\\n  margin: \", \";\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useRef, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\nimport { toBN } from 'web3-utils';\nimport options from '../../options';\nconst SPEED = 4;\nconst BalanceCard = styled.div(_templateObject(), () => options.balanceStyle === 'stack' ? '4px 0' : '16px 8px');\nconst BalanceText = styled.div(_templateObject2());\nconst Value = styled.div(_templateObject3());\nconst AssetName = styled.div(_templateObject4());\nconst Icon = styled.div(_templateObject5());\n\nconst valueToHTML = val => {\n  const decimal = val.indexOf('.');\n  return Array.from(val).map((char, index) => {\n    let className = char === '.' ? '' : 'digit';\n\n    if (index > decimal + 2) {\n      className += ' gray';\n    }\n\n    return \"<div class=\\\"\".concat(className, \"\\\">\").concat(char, \"</div>\");\n  }).join('');\n};\n\nconst getValue = (asset, balance) => {\n  if (!balance) {\n    return '-';\n  }\n\n  try {\n    const usdVal = asset.getUSDValue(balance);\n    return \"$\".concat(parseFloat(usdVal).toFixed(2));\n  } catch (e) {\n    const displayVal = asset.getDisplayValue(balance);\n    return parseFloat(displayVal).toFixed(2);\n  }\n};\n\nconst BalanceItem = ({\n  asset,\n  balance,\n  growthRate\n}) => {\n  const valueDiv = useRef(null);\n  const value = getValue(asset, balance);\n  useLayoutEffect(() => {\n    if (!balance || growthRate === '0') {\n      return;\n    }\n\n    const startTime = Date.now();\n    let req;\n    let frame = 0;\n\n    const updateNum = () => {\n      if (valueDiv.current && frame++ % SPEED === 0) {\n        const timeDiff = (Date.now() - startTime).toString();\n        const valueDiff = toBN(growthRate).mul(toBN(timeDiff)).div(toBN('1000'));\n        const newBalance = toBN(balance).add(valueDiff).toString();\n        const displayVal = getValue(asset, newBalance);\n\n        if (displayVal.length === valueDiv.current.childElementCount) {\n          Array.from(displayVal).forEach((char, index) => {\n            const textNode = valueDiv.current.children[index].firstChild;\n\n            if (textNode.data !== char) {\n              textNode.data = char;\n            }\n          });\n        } else {\n          valueDiv.current.innerHTML = valueToHTML(displayVal);\n        }\n      }\n\n      req = window.requestAnimationFrame(updateNum);\n    };\n\n    updateNum();\n    return () => void window.cancelAnimationFrame(req);\n  }, [balance, asset, growthRate]);\n  return React.createElement(BalanceCard, null, asset.icon && React.createElement(Icon, {\n    style: {\n      backgroundImage: \"url('\".concat(asset.icon, \"')\")\n    }\n  }), React.createElement(BalanceText, null, React.createElement(Value, {\n    ref: valueDiv\n  }, Array.from(value).map((char, index) => React.createElement(\"div\", {\n    className: char !== '.' ? 'digit' : '',\n    key: index\n  }, char))), React.createElement(AssetName, null, asset.name)));\n};\n\nexport default BalanceItem;","map":null,"metadata":{},"sourceType":"module"}