{"ast":null,"code":"require('isomorphic-fetch');\n\nconst assets = {};\nlet cacheExpiration = 10 * 1000;\n\nclass AssetPrice {\n  constructor(symbol) {\n    this.symbol = symbol;\n    this.lastFetch = 0;\n    this.lastPrice = null;\n  }\n\n  async getPrice() {\n    if (Date.now() - this.lastFetch < cacheExpiration) {\n      return this.lastPrice;\n    }\n\n    const price = this.fetchPrice();\n    this.lastPrice = price;\n    this.lastFetch = Date.now();\n    return price;\n  }\n\n  async fetchPrice() {\n    const symbol = this.symbol.toUpperCase();\n    const url = \"https://min-api.cryptocompare.com/data/price?fsym=\".concat(symbol, \"&tsyms=USD\");\n    const result = await fetch(url);\n    const data = await result.json();\n    return data.USD;\n  }\n\n}\n\nmodule.exports.getPrice = async function getPrice(symbol) {\n  if (!assets[symbol]) {\n    assets[symbol] = new AssetPrice(symbol);\n  }\n\n  return assets[symbol].getPrice();\n};","map":null,"metadata":{},"sourceType":"script"}