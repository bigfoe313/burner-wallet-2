{"ast":null,"code":"var _regeneratorRuntime = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _defineProperty = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty\");\n\nvar _asyncToGenerator = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _classCallCheck = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _possibleConstructorReturn = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn\");\n\nvar _getPrototypeOf = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf\");\n\nvar _inherits = require(\"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar Web3 = require('web3');\n\nvar _require = require('web3-utils'),\n    toBN = _require.toBN;\n\nvar Signer = require('./Signer');\n\nvar TempSigner =\n/*#__PURE__*/\nfunction (_Signer) {\n  \"use strict\";\n\n  _inherits(TempSigner, _Signer);\n\n  function TempSigner() {\n    var _this;\n\n    _classCallCheck(this, TempSigner);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TempSigner).call(this, {\n      id: 'temp'\n    }));\n    _this.account = null;\n    return _this;\n  }\n\n  _createClass(TempSigner, [{\n    key: \"getAccounts\",\n    value: function getAccounts() {\n      return this.account ? [this.account.address] : [];\n    }\n  }, {\n    key: \"isAvailable\",\n    value: function isAvailable() {\n      return !!this.account;\n    }\n  }, {\n    key: \"signTx\",\n    value: function () {\n      var _signTx = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(tx) {\n        var _tx, _ref, rawTransaction;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _tx = _objectSpread({}, tx, {\n                  // Workaround for https://github.com/ethereumjs/ethereumjs-tx/pull/195\n                  common: {\n                    customChain: {\n                      chainId: tx.chainId,\n                      networkId: tx.chainId\n                    },\n                    hardfork: 'istanbul'\n                  }\n                });\n                _context.next = 3;\n                return this.account.signTransaction(_tx);\n\n              case 3:\n                _ref = _context.sent;\n                rawTransaction = _ref.rawTransaction;\n                _tx.signedTransaction = rawTransaction;\n                return _context.abrupt(\"return\", _tx);\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function signTx(_x) {\n        return _signTx.apply(this, arguments);\n      }\n\n      return signTx;\n    }()\n  }, {\n    key: \"signMsg\",\n    value: function () {\n      var _signMsg = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(msg) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", this.account.sign(msg).signature);\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function signMsg(_x2) {\n        return _signMsg.apply(this, arguments);\n      }\n\n      return signMsg;\n    }()\n  }, {\n    key: \"permissions\",\n    value: function permissions() {\n      return ['enable', 'disable'];\n    }\n  }, {\n    key: \"invoke\",\n    value: function invoke(action, newPK) {\n      switch (action) {\n        case 'disable':\n          this.account = null;\n          this.events.emit('accountChange');\n          return;\n\n        case 'enable':\n          this._generateAccountFromPK(newPK);\n\n          return this.account.address;\n\n        case 'getAddress':\n          return this.account && this.account.address;\n\n        default:\n          throw new Error(\"Unknown action \".concat(action));\n      }\n    }\n  }, {\n    key: \"_generateAccountFromPK\",\n    value: function _generateAccountFromPK(privateKey) {\n      this.account = new Web3().eth.accounts.privateKeyToAccount(privateKey);\n      this.events.emit('accountChange');\n    }\n  }]);\n\n  return TempSigner;\n}(Signer);\n\nmodule.exports = TempSigner;","map":null,"metadata":{},"sourceType":"script"}