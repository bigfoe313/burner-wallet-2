{"ast":null,"code":"import _taggedTemplateLiteral from \"/home/aforbers/burner-wallet-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  min-width: 60px;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n  background-size: contain;\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 16px;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: 48px;\\n  display: flex;\\n  justify-content: flex-end;\\n\\n  & .digit {\\n    width: 30px;\\n    text-align: center;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  flex: 1;\\n  display: flex;\\n  flex-direction: column;\\n  text-align: right;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  display: inline-flex;\\n  vertical-align: middle;\\n  font-size: 48px;\\n  font-weight: 400;\\n  text-align: right;\\n  padding: 8px 16px 8px 8px;\\n  border: 1px solid #ccc;\\n  border-radius: 8px;\\n  min-width: 225px;\\n  background: white;\\n  margin: \", \";\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useRef, useLayoutEffect } from 'react';\nimport styled from 'styled-components';\nimport { toBN } from 'web3-utils';\nimport options from '../../options';\nvar SPEED = 4;\nvar BalanceCard = styled.div(_templateObject(), function () {\n  return options.balanceStyle === 'stack' ? '4px 0' : '16px 8px';\n});\nvar BalanceText = styled.div(_templateObject2());\nvar Value = styled.div(_templateObject3());\nvar AssetName = styled.div(_templateObject4());\nvar Icon = styled.div(_templateObject5());\n\nvar valueToHTML = function valueToHTML(val) {\n  var decimal = val.indexOf('.');\n  return Array.from(val).map(function (char, index) {\n    var className = char === '.' ? '' : 'digit';\n\n    if (index > decimal + 2) {\n      className += ' gray';\n    }\n\n    return \"<div class=\\\"\".concat(className, \"\\\">\").concat(char, \"</div>\");\n  }).join('');\n};\n\nvar getValue = function getValue(asset, balance) {\n  if (!balance) {\n    return '-';\n  }\n\n  try {\n    var usdVal = asset.getUSDValue(balance);\n    return \"$\".concat(parseFloat(usdVal).toFixed(2));\n  } catch (e) {\n    var displayVal = asset.getDisplayValue(balance);\n    return parseFloat(displayVal).toFixed(2);\n  }\n};\n\nvar BalanceItem = function BalanceItem(_ref) {\n  var asset = _ref.asset,\n      balance = _ref.balance,\n      growthRate = _ref.growthRate;\n  var valueDiv = useRef(null);\n  var value = getValue(asset, balance);\n  useLayoutEffect(function () {\n    if (!balance || growthRate === '0') {\n      return;\n    }\n\n    var startTime = Date.now();\n    var req;\n    var frame = 0;\n\n    var updateNum = function updateNum() {\n      if (valueDiv.current && frame++ % SPEED === 0) {\n        var timeDiff = (Date.now() - startTime).toString();\n        var valueDiff = toBN(growthRate).mul(toBN(timeDiff)).div(toBN('1000'));\n        var newBalance = toBN(balance).add(valueDiff).toString();\n        var displayVal = getValue(asset, newBalance);\n\n        if (displayVal.length === valueDiv.current.childElementCount) {\n          Array.from(displayVal).forEach(function (char, index) {\n            var textNode = valueDiv.current.children[index].firstChild;\n\n            if (textNode.data !== char) {\n              textNode.data = char;\n            }\n          });\n        } else {\n          valueDiv.current.innerHTML = valueToHTML(displayVal);\n        }\n      }\n\n      req = window.requestAnimationFrame(updateNum);\n    };\n\n    updateNum();\n    return function () {\n      return void window.cancelAnimationFrame(req);\n    };\n  }, [balance, asset, growthRate]);\n  return React.createElement(BalanceCard, null, asset.icon && React.createElement(Icon, {\n    style: {\n      backgroundImage: \"url('\".concat(asset.icon, \"')\")\n    }\n  }), React.createElement(BalanceText, null, React.createElement(Value, {\n    ref: valueDiv\n  }, Array.from(value).map(function (char, index) {\n    return React.createElement(\"div\", {\n      className: char !== '.' ? 'digit' : '',\n      key: index\n    }, char);\n  })), React.createElement(AssetName, null, asset.name)));\n};\n\nexport default BalanceItem;","map":null,"metadata":{},"sourceType":"module"}